<main class="App__main">
  <div class="App__projects-container">
    <label for="projects-dropdown">Select project(s) to connect to Razroo</label>
    <vscode-dropdown *ngIf="projectConfigs" [style]="'height: ' + ((((projectConfigs.length + 1) * 18) >= 200) ? 200 : (projectConfigs.length * 18) + 8) + 'px'"
      class="App__dropdown" id="projects-dropdown" multiple open>
      <ng-container *ngFor="let projectOption of projectConfigs">
        <div>
          <vscode-option [class]="(projectOption | isProjectSelected : selectedProjects) ? 'App__dropdown-selected' : ''" (click)="toggleProjectOption(projectOption, projectConfigs)">{{projectOption.packageJsonParams.name | idToTitle}}</vscode-option>
        </div>
  
      </ng-container>
    </vscode-dropdown>
  
    <vscode-button class="App__button" [disabled]="authIsLoading || !(selectedProjects?.length)" (click)="connectProjects(selectedProjects)">{{authIsLoading ? 'Connecting...' : 'Connect'}}</vscode-button>
    <!-- <div *ngIf="orgId && userId" class="App__org">
      <p *ngIf="orgId !== userId"><i>You are logged into {{orgId | titlecase}}</i></p>
      <p *ngIf="orgId === userId"><i>You are logged into your personal workspace</i></p>
    </div> -->
    <ng-container *ngIf="orgId && userId">
      <label for="org_dropdown" class="App__org">
        <p *ngIf="orgId !== userId"><i>You are logged into {{organizations.length ? (orgId | zetaOrganizations : organizations)[0].displayName : ''}}</i></p>
        <p *ngIf="orgId === userId"><i>You are logged into your personal workspace</i></p>
      </label>
      <vscode-dropdown formControlName="orgDropdown" (change)="changeOrgDropdownValue($event)" class="App__organizations-dropdown" id="org_dropdown">
        <ng-container *ngFor="let organization of (orgId | zetaOrganizations : organizations)">
          <vscode-option [value]="organization?.orgId">{{organization?.displayName
            ? (organization?.displayName | titlecase)
            : (organization.orgId === organization.userId ? 'Personal Workspace' : organization.orgId)}}</vscode-option>
        </ng-container>
      </vscode-dropdown>
    </ng-container>
  </div>

  <div class="App__user-login-container">
    <i>Log out to sign in as a different user</i>
    <vscode-button class="App__user-logout-button" (click)="logout()">Logout</vscode-button>
  </div>
</main>
